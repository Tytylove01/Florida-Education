---
title: "Home Page"
execute: 
  echo: false
  message: fasle
  warning: false
---

```{r}
library(tidycensus)
library(tidyverse)
library(leaflet)
library(sf)
library(viridis)

fl_education_data <- read_rds("data.rds")

```


```{r}
fl_education_data$estimate <- as.numeric(fl_education_data$estimate)


fl_education_data <- fl_education_data[!st_is_empty(fl_education_data$geometry), ]
```

```{r}
# Create a color palette based on the estimate values
pal <- colorNumeric(
  palette = viridis(10),  # Use the viridis color scale
  domain = fl_education_data$estimate  # Map to the estimate values
)
# Create the interactive map
leaflet_map <- leaflet(fl_education_data) %>%
  addTiles() %>%  # Add base map tiles
  addPolygons(
    fillColor = ~pal(estimate),  # Color polygons based on estimate
    fillOpacity = 0.7,  # Set polygon fill opacity
    color = "#444444",  # Border color
    weight = 1,  # Border width
    smoothFactor = 0.5,  # Smoothness of polygons
    popup = ~paste(  # Add popup with details
      "Census Tract: ", NAME, "<br>",
      "Population with <9th Grade Education: ", estimate
    )
  ) %>%
  addLegend(
    pal = pal,  # Use the color palette
    values = ~estimate,  # Map to estimate values
    title = "Population with <9th Grade Education",  # Legend title
    position = "bottomright"  # Legend position
  )

# Display the map
leaflet_map
```


