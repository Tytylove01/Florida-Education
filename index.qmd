---
title: "Home Page"
execute: 
  echo: false
  message: fasle
  warning: false
---

```{r}
library(tidycensus)
library(tidyverse)
library(plotly)
library(sf)
library(viridis)
library(leaflet)

x <- read_rds("fl_data.rds")

```

```{r}

# Convert the sf object to a data frame
fl_education_df <- x %>%
  st_as_sf() %>%
  st_centroid() %>%  # Get the centroid of each polygon
  st_coordinates() %>%  # Extract the coordinates
  as.data.frame() %>%
  cbind(x)  # Combine with the original data

# Create a color palette for the percentage of Bachelor's degrees
pal <- colorNumeric(palette = viridis(100), domain = fl_education_df$pct_bachelors)

# Create the interactive Leaflet map
leaflet_map <- leaflet(fl_education_df) %>%
  addTiles() %>%  # Add default OpenStreetMap tiles (street view)
  addProviderTiles(providers$Esri.WorldImagery, group = "Satellite View") %>%  # Add satellite view
  addCircleMarkers(
    lng = ~X,  # Longitude
    lat = ~Y,  # Latitude
    radius = 5,  # Marker size
    color = ~pal(pct_bachelors),  # Color by percentage of Bachelor's degree
    fillOpacity = 0.8,  # Marker opacity
    popup = ~paste("Tract: ", NAME, "<br>Bachelor's Degree: ", round(pct_bachelors, 2), "%")  # Popup text
  ) %>%
  addLayersControl(
    baseGroups = c("Street View", "Satellite View"),  # Layer control for switching views
    options = layersControlOptions(collapsed = FALSE)
  ) %>%
  addLegend(
    pal = pal,  # Color palette
    values = ~pct_bachelors,  # Values for the legend
    title = "Bachelor's Degree (%)",  # Legend title
    position = "bottomright"
  ) %>%
  setView(lng = -81.5158, lat = 27.6648, zoom = 7)  # Set initial view to Florida

# Display the map
leaflet_map


```

```{r}

```
